language: python
python: '3.7'
branches:
  only:
  - master
  - develop

install:
  - pip install pytest coverage codacy-coverage
  - pip install -r requirements.txt

script:
  - coverage run -m py.test tests -vvv
  - coverage xml

deploy:
  provider: pypi
  username: "tim55667757"
  password:
    secure: "EgqaaHXSVya3NcHHwMDaZm+9z5q4K87YsTUzfsg2AQQTzSpGktK6IyUhuxaVd9JsJAs65CRsnIxr7EWLR5nxbnwdXuEmvarp6MHuiUbLZMsYmA2sV/AFwIr5hOVE8dAXFAk0qBNI1HlM1Hr1CWSjNkPQ7ARlfOEFhTkJsSFX9f96oHBGr9hzlVxLT4INWPYFUrk/jV5GP8oAuDXZ7+udTmN5F1FobqtbpMuyJ2+LEpNP4ySzZJzYPMTWihsWhq2rvG5lLDXzl1pHaqASkgHnXxecLHwdeIK8JBSEwRHKZi86L/7sghOICU0GkIRBJOXX5zOx4zCTT7unqLAf06dSC60kHNMqgU21um+RVn87O30R5x2rov+NitzxNAq56tNfPWuOYOhlstD/3Vr8JAsRbiEqyA4ehBHS8u5exOvw2ktq8rhn3na13Pv15wUBBLTtEyi1tJl23W0QQzHB08nT2JeHZml76PyUPWAk6QmfpAlQXA8wXDAt9OX4UVA88pwi/wXw8dQtfDnltIV1a0MX5i/nfj3S/govH1z2FsfW/WAX5LmYfkT6t4/VxbigaNy5spcc2miQd8/Yve/iE/+2KsiQ5WLFMth9YlJ976feZveRhDxOTT04d/mMFGnBLh6YvUvLReDF5V2U7is4JLp9gJb0H+CtZeE+XdrsNpCz1KE="
  distributions: sdist bdist_wheel
  on:
    all_branches: true
  skip_cleanup: true

after_script:
  - echo "Deploy to PyPI finished."