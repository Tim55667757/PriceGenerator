language: python
python: '3.7'
branches:
  only:
  - master
  - develop

install:
  - pip install pytest coverage codacy-coverage
  - pip install -r requirements.txt

script:
  - coverage run -m py.test tests -vvv
  - coverage xml

deploy:
  provider: pypi
  username: tim55667757
  password:
    secure: KczdsiH7Kup7sx7xhJKEPbWN6m7e5d4Bh2oPMpTln+Oc8hSZKAX9FE+Us3HBZuBEaFahFvTjaszf6kuJ3voJA3bksq4cUZjnZSTQGJv3uVS4HE4CpJmBP4HrFZVWp9jYlQTC6DynY/mNbLYqjAEPEVhXu8Fmkgh7LcxF9G61GpymJOWXLS/V7HEDFXsQrOWmNiZCPa4AYWL4r6VpfFSR38vcxb1KC8OKosGDEe/yGf4WrrW8fgTuWjuw8KW5IdxqUZdpDg8tYU6WJwkZvoKHa8Afer/5WVhifPsAGf7igR5ZHBL8v/oND7oXEZwHgX8O8it3yERQ3sQ8HUbgwYEQ5jetsknxUK/bNEj/tM7UQs6/g9WqEuBeh019DbhcwFA7hy7wmSv7Tb3oSbDzY0ZJha6eFtZECvH1LVzmBqyBjo/RblFDIdTzh5JNMjs3GlH9oharnP05C4r3XhaleAAbyNQcH7PEQxY/tWha+/LwYrV7rS5MDjO/ng0kbVYLIVTEl47u2ez1p89/W9+97u33KnqpNOryK2hRjXR3p1XWEidDe+AkK/BEUbdjhSfNKbGcQ38fTX/f4a/qIwOUW1UeFUmi9KXVlOzaoOZ4ElKsxuYp4yRweO6ekbv3wGA+tqQMOSyaD/LjCvX1Ck6Dbh4HQ1F0WgdcaAmOwW/4U/LJYQ0=
  distributions: sdist bdist_wheel
  on:
    all_branches: true
  skip_cleanup: true

after_script:
  - echo "Deploy to PyPI finished."